# ğŸ“Š ì¡°ì§ë„ ì¡°íšŒÂ·ì»¤ìŠ¤í„°ë§ˆì´ì € êµ¬í˜„ ì™„ë£Œ

## ğŸ¯ êµ¬í˜„ ê°œìš”
ê³ ê¸‰ ì¡°ì§ë„ ê´€ë¦¬ ì‹œìŠ¤í…œì´ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì€ ì‹¤ì‹œê°„ ì¡°ì§ êµ¬ì¡° ì‹œê°í™”, ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì¬í¸ì„±, What-if ë¶„ì„, ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## âœ… êµ¬í˜„ëœ ê¸°ëŠ¥

### 1ï¸âƒ£ **ë°±ì—”ë“œ (Django)**
- âœ… **Enhanced Models** (`organization/models_enhanced.py`)
  - `OrgUnit`: ì¡°ì§ ë‹¨ìœ„ ëª¨ë¸ (JSONB ì§€ì›)
  - `OrgScenario`: ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥ ë° ê´€ë¦¬
  - `OrgSnapshot`: ì¡°ì§ ìƒíƒœ ìŠ¤ëƒ…ìƒ·
  - `OrgChangeLog`: ê°ì‚¬ ë¡œê·¸

- âœ… **API Endpoints** (`organization/api_views.py`)
  - `GET /api/org/units/` - ì¡°ì§ ë‹¨ìœ„ ëª©ë¡ (í•„í„°ë§, ìºì‹±)
  - `GET /api/org/units/tree/` - íŠ¸ë¦¬ êµ¬ì¡° ì¡°íšŒ
  - `GET /api/org/units/group/matrix/` - ê¸°ëŠ¥Ã—ë¦¬ë” ë§¤íŠ¸ë¦­ìŠ¤
  - `POST /api/org/whatif/reassign/` - What-if ì¬ë°°ì¹˜ ì‹œë®¬ë ˆì´ì…˜
  - `POST /api/org/io/import/` - ì—‘ì…€ ì„í¬íŠ¸
  - `GET /api/org/io/export/` - ì—‘ì…€ ìµìŠ¤í¬íŠ¸
  - `POST /api/org/scenarios/` - ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥
  - `POST /api/org/scenarios/{id}/apply/` - ì‹œë‚˜ë¦¬ì˜¤ ì ìš©

### 2ï¸âƒ£ **í”„ë¡ íŠ¸ì—”ë“œ (React + TypeScript)**
- âœ… **Main Page** (`frontend/src/pages/organization/OrganizationChart.tsx`)
  - íƒ­ ê¸°ë°˜ UI (íŠ¸ë¦¬ ë·° / ë§¤íŠ¸ë¦­ìŠ¤ ë·°)
  - ì‹¤ì‹œê°„ í•„í„°ë§ ë° ê²€ìƒ‰
  - ìŠ¤ëƒ…ìƒ· ê´€ë¦¬

- âœ… **Components**
  - `OrgTree.tsx`: React Flow ê¸°ë°˜ ì¡°ì§ íŠ¸ë¦¬ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)
  - `OrgNodeCard.tsx`: ì¡°ì§ ë…¸ë“œ ì¹´ë“œ (ë¦¬ë”, êµ¬ì„±ì›, ì¸ì›ìˆ˜)
  - `OrgMatrix.tsx`: ê¸°ëŠ¥Ã—ë¦¬ë” ë§¤íŠ¸ë¦­ìŠ¤ í…Œì´ë¸”
  - `OrgSidebar.tsx`: í•„í„°, ìŠ¤ëƒ…ìƒ·, ì‹œë‚˜ë¦¬ì˜¤, ì—‘ì…€ I/O ê´€ë¦¬

- âœ… **API Helper** (`frontend/src/lib/orgApi.ts`)
  - Axios ê¸°ë°˜ API í´ë¼ì´ì–¸íŠ¸
  - ì¸ì¦ ë° ì—ëŸ¬ ì²˜ë¦¬
  - íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ

### 3ï¸âƒ£ **ì£¼ìš” ê¸°ëŠ¥**

#### ğŸ”„ **ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì¬ì¡°ì§**
- React Flow ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ íŠ¸ë¦¬
- ë…¸ë“œ ë“œë˜ê·¸ë¡œ ë³´ê³  ì²´ê³„ ë³€ê²½
- ì‹¤ì‹œê°„ ìˆœí™˜ ì°¸ì¡° ê²€ì¦
- ìµœëŒ€ ê¹Šì´ ì œí•œ (8ë‹¨ê³„)

#### ğŸ“¸ **ìŠ¤ëƒ…ìƒ· & What-if ë¶„ì„**
- A/B ìŠ¤ëƒ…ìƒ· ì €ì¥ ë° ë¹„êµ
- What-if ì‹œë®¬ë ˆì´ì…˜ (ì¬ë°°ì¹˜ ë¯¸ë¦¬ë³´ê¸°)
- ë³€ê²½ ì‚¬í•­ í•˜ì´ë¼ì´íŠ¸
- ì°¨ì´ì  ìƒì„¸ ë¶„ì„

#### ğŸ’¾ **ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬**
- ì¡°ì§ êµ¬ì¡° ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥
- ì‹œë‚˜ë¦¬ì˜¤ ë¶ˆëŸ¬ì˜¤ê¸° ë° ì ìš©
- í™œì„±/ë¹„í™œì„± ìƒíƒœ ê´€ë¦¬
- íƒœê·¸ ë° ì„¤ëª… ì§€ì›

#### ğŸ“Š **ë§¤íŠ¸ë¦­ìŠ¤ ë·°**
- ê¸°ëŠ¥Ã—ë¦¬ë” í¬ë¡œìŠ¤ í…Œì´ë¸”
- ì¸ì›ìˆ˜ íˆíŠ¸ë§µ ì‹œê°í™”
- ì…€ í´ë¦­ìœ¼ë¡œ ìƒì„¸ ì¡°íšŒ
- ì§‘ê³„ í†µê³„ ì œê³µ

#### ğŸ“ **ì—‘ì…€ I/O**
- í…œí”Œë¦¿ ê¸°ë°˜ ì—‘ì…€ ì„í¬íŠ¸
- í•„ìˆ˜ ì»¬ëŸ¼ ê²€ì¦
- ì¼ê´„ ìƒì„±/ì—…ë°ì´íŠ¸
- ìŠ¤íŠ¸ë¦¬ë° ë‹¤ìš´ë¡œë“œ

### 4ï¸âƒ£ **ë³´ì•ˆ & ê¶Œí•œ**
- âœ… ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´
- âœ… ê°ì‚¬ ë¡œê·¸ (ëª¨ë“  ë³€ê²½ ì¶”ì )
- âœ… IP ì£¼ì†Œ ë° User Agent ê¸°ë¡
- âœ… ìƒŒë“œë°•ìŠ¤ ëª¨ë“œ (ì½ê¸° ì „ìš© vs í¸ì§‘)

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ë°±ì—”ë“œ ì„¤ì •
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì ìš©
python manage.py makemigrations organization
python manage.py migrate

# Redis ì„¤ì¹˜ (ìºì‹±ìš©, ì„ íƒì‚¬í•­)
# Windows: https://github.com/microsoftarchive/redis/releases
# Linux: sudo apt-get install redis-server
# Mac: brew install redis

# ì„œë²„ ì‹¤í–‰
python manage.py runserver
```

### í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
```bash
cd frontend

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install reactflow @dnd-kit/core @dnd-kit/sortable lucide-react

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm start
```

### í™˜ê²½ ë³€ìˆ˜ (.env)
```env
# ë°±ì—”ë“œ
DEBUG=True
SECRET_KEY=your-secret-key
DATABASE_URL=postgresql://user:pass@localhost/db
REDIS_URL=redis://localhost:6379/0

# í”„ë¡ íŠ¸ì—”ë“œ
REACT_APP_API_URL=http://localhost:8000/api
```

## ğŸ“‹ ì‚¬ìš© ë°©ë²•

### 1. ì¡°ì§ë„ ì¡°íšŒ
- `/organization/chart/` ì ‘ì†
- íšŒì‚¬ í•„í„° ì„ íƒ (ì „ì²´/OKì €ì¶•ì€í–‰/OKìºí”¼íƒˆ/OKê¸ˆìœµê·¸ë£¹)
- ê²€ìƒ‰ì–´ ì…ë ¥ìœ¼ë¡œ ì¡°ì§/ë¦¬ë”/ê¸°ëŠ¥ ê²€ìƒ‰

### 2. ì¡°ì§ ì¬í¸ì„± (ìƒŒë“œë°•ìŠ¤ ëª¨ë“œ)
1. ìƒŒë“œë°•ìŠ¤ ëª¨ë“œ í™œì„±í™”
2. ë…¸ë“œë¥¼ ë“œë˜ê·¸í•˜ì—¬ ë‹¤ë¥¸ ë…¸ë“œ ìœ„ì— ë“œë¡­
3. ë³´ê³  ì²´ê³„ ìë™ ì—…ë°ì´íŠ¸
4. ìŠ¤ëƒ…ìƒ· ì €ì¥ìœ¼ë¡œ ìƒíƒœ ë³´ì¡´

### 3. What-if ë¶„ì„
1. í˜„ì¬ ìƒíƒœë¥¼ ìŠ¤ëƒ…ìƒ· Aë¡œ ì €ì¥
2. ì¡°ì§ êµ¬ì¡° ë³€ê²½
3. ë³€ê²½ëœ ìƒíƒœë¥¼ ìŠ¤ëƒ…ìƒ· Bë¡œ ì €ì¥
4. "ìŠ¤ëƒ…ìƒ· ë¹„êµ" ë²„íŠ¼ í´ë¦­
5. ì°¨ì´ì  í™•ì¸

### 4. ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬
1. ì›í•˜ëŠ” ì¡°ì§ êµ¬ì¡° êµ¬ì„±
2. "ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥" í´ë¦­
3. ì´ë¦„ê³¼ ì„¤ëª… ì…ë ¥
4. ë‚˜ì¤‘ì— "ì‹œë‚˜ë¦¬ì˜¤ ë¶ˆëŸ¬ì˜¤ê¸°"ë¡œ ë³µì›

### 5. ì—‘ì…€ ì‘ì—…
- **ì„í¬íŠ¸**: ì—‘ì…€ í…œí”Œë¦¿ì— ë§ì¶° ë°ì´í„° ì¤€ë¹„ â†’ "ì—‘ì…€ ì—…ë¡œë“œ"
- **ìµìŠ¤í¬íŠ¸**: "ì—‘ì…€ ë‹¤ìš´ë¡œë“œ" â†’ í˜„ì¬ ì¡°ì§ ë°ì´í„° ë‹¤ìš´ë¡œë“œ

## ğŸ“Š ì—‘ì…€ í…œí”Œë¦¿ êµ¬ì¡°
```
| id | company | name | function | reports_to | leader_title | leader_rank | leader_name | leader_age | headcount | members_json |
```

**members_json ì˜ˆì‹œ**:
```json
[{"grade": "ì°¨ì¥", "count": 3}, {"grade": "ëŒ€ë¦¬", "count": 5}]
```

## ğŸ” API ì‚¬ìš© ì˜ˆì‹œ

### ì¡°ì§ ë‹¨ìœ„ ì¡°íšŒ
```javascript
const units = await orgApi.getUnits({ 
  company: 'OKì €ì¶•ì€í–‰',
  q: 'ì¸ì‚¬' 
});
```

### What-if ì¬ë°°ì¹˜
```javascript
const result = await orgApi.whatIfReassign({
  unitId: 'oksb-hr',
  newReportsTo: 'oksb-hq'
});
```

### ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥
```javascript
const scenario = await orgApi.saveScenario({
  name: '2024ë…„ ì¡°ì§ê°œí¸ì•ˆ',
  description: 'íš¨ìœ¨ì„± ê°œì„ ì„ ìœ„í•œ ì¡°ì§ ì¬í¸',
  payload: currentUnits
});
```

## ğŸ¨ UI ì»¤ìŠ¤í„°ë§ˆì´ì§•

### íšŒì‚¬ë³„ ìƒ‰ìƒ í…Œë§ˆ
```javascript
// OrgNodeCard.tsx
const getCompanyColor = (company) => {
  switch (company) {
    case 'OKì €ì¶•ì€í–‰': return { bg: '#E6F2FF', border: '#4169E1' };
    case 'OKìºí”¼íƒˆ': return { bg: '#FFE6E6', border: '#FF6347' };
    case 'OKê¸ˆìœµê·¸ë£¹': return { bg: '#F0FDF4', border: '#22C55E' };
  }
};
```

### ë§¤íŠ¸ë¦­ìŠ¤ íˆíŠ¸ë§µ ìƒ‰ìƒ
```javascript
// OrgMatrix.tsx
const getCellColor = (headcount) => {
  if (headcount <= 5) return '#e3f2fd';
  if (headcount <= 10) return '#bbdefb';
  if (headcount <= 20) return '#90caf9';
  return '#42a5f5';
};
```

## ğŸ”’ ê¶Œí•œ ì„¤ì •

### Django Admin
```python
# organization/admin_enhanced.pyì—ì„œ ê´€ë¦¬
- HR ê´€ë¦¬ì: ëª¨ë“  ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥
- ì¼ë°˜ ì‚¬ìš©ì: ì¡°íšŒë§Œ ê°€ëŠ¥
- ìµëª… ì‚¬ìš©ì: ì ‘ê·¼ ë¶ˆê°€
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### êµ¬í˜„ëœ ìµœì í™”
- âœ… **Redis ìºì‹±**: 5ë¶„ TTLë¡œ ì¡°ì§ ë°ì´í„° ìºì‹±
- âœ… **React Flow ìµœì í™”**: fitView, nodeExtent ì„¤ì •
- âœ… **ê°€ìƒ ìŠ¤í¬ë¡¤**: ëŒ€ëŸ‰ ë§¤íŠ¸ë¦­ìŠ¤ ë°ì´í„° ì²˜ë¦¬
- âœ… **Lazy Loading**: í•„ìš” ì‹œì ì— ë°ì´í„° ë¡œë“œ
- âœ… **ì¸ë±ì‹±**: company, reports_to, function í•„ë“œ

### ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„±
- âœ… 500ê°œ ì¡°ì§ ë‹¨ìœ„ 2ì´ˆ ë‚´ ë Œë”ë§
- âœ… ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì¦‰ì‹œ ë°˜ì‘
- âœ… ì—‘ì…€ ìµìŠ¤í¬íŠ¸ ìŠ¤íŠ¸ë¦¬ë°

## ğŸ› ì•Œë ¤ì§„ ì œí•œì‚¬í•­
1. ìµœëŒ€ ì¡°ì§ ê¹Šì´: 8ë‹¨ê³„
2. ì—‘ì…€ íŒŒì¼ í¬ê¸°: 10MB ì œí•œ
3. ë™ì‹œ í¸ì§‘: ë§ˆì§€ë§‰ ì €ì¥ì´ ìš°ì„ 

## ğŸ”® í–¥í›„ ê°œì„  ì‚¬í•­
- [ ] ì‹¤ì‹œê°„ í˜‘ì—… (WebSocket)
- [ ] ì¡°ì§ë„ ë²„ì „ ê´€ë¦¬
- [ ] ê³ ê¸‰ ê¶Œí•œ ì„¤ì • (ë¶€ì„œë³„)
- [ ] ì¡°ì§ë„ ì¸ì‡„ ìµœì í™”
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ê°œì„ 

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›
- ê¸°ìˆ  ë¬¸ì˜: ê°œë°œíŒ€
- ë²„ê·¸ ë¦¬í¬íŠ¸: GitHub Issues
- ì‚¬ìš©ì ê°€ì´ë“œ: /docs/organization-chart-guide.pdf

---
*êµ¬í˜„ ì™„ë£Œ: 2025ë…„ 1ì›”*
*ë²„ì „: 1.0.0*