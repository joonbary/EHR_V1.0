{% extends 'base_revolutionary.html' %}
{% load static %}

{% block title %}보상 대시보드 - EHR System{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/revolutionary-design-system.css' %}">
<style>
/* Page Specific Styles */
.compensation-hero {
    min-height: 300px;
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 153, 255, 0.05) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-xl);
    margin-bottom: var(--spacing-2xl);
}

.compensation-hero::before {
    content: '';
    position: absolute;
    width: 150%;
    height: 150%;
    background: radial-gradient(circle, rgba(0, 212, 255, 0.2) 0%, transparent 70%);
    animation: rotate-slow 15s linear infinite;
}

.hero-content {
    text-align: center;
    z-index: 2;
    position: relative;
}

.hero-subtitle {
    font-size: 18px;
    color: var(--text-secondary);
    margin-top: var(--spacing-md);
    letter-spacing: 2px;
    text-transform: uppercase;
}

/* Enhanced Stat Cards */
.stat-card-enhanced {
    position: relative;
    height: 100%;
    min-height: 180px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.stat-icon-wrapper {
    position: absolute;
    top: var(--spacing-md);
    right: var(--spacing-md);
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--primary-gradient);
    border-radius: var(--radius-md);
    font-size: 24px;
    color: var(--bg-dark);
    box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
}

.stat-trend {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 14px;
    margin-top: var(--spacing-sm);
}

.trend-up {
    color: #00ff88;
}

.trend-down {
    color: #ff4757;
}

/* Chart Cards Enhanced */
.chart-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
    height: 450px;
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.chart-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.chart-actions {
    display: flex;
    gap: var(--spacing-sm);
}

.chart-action-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    padding: 8px 12px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    cursor: pointer;
    transition: var(--transition-fast);
}

.chart-action-btn:hover {
    background: rgba(0, 212, 255, 0.1);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Data Table Enhanced */
.data-table-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.table-header {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 153, 255, 0.05) 100%);
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 2px solid rgba(0, 212, 255, 0.2);
}

.table-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--primary-color);
}

/* Quick Actions Enhanced */
.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-2xl);
}

.action-card {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
    position: relative;
    overflow: hidden;
}

.action-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
    opacity: 0;
    transition: opacity var(--transition-smooth);
}

.action-card:hover {
    transform: translateY(-5px) scale(1.02);
    border-color: var(--primary-color);
    box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
}

.action-card:hover::before {
    opacity: 1;
    animation: rotate-slow 10s linear infinite;
}

.action-icon {
    font-size: 32px;
    margin-bottom: var(--spacing-md);
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.action-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

/* Animated Background Pattern */
.dashboard-pattern {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.03;
    pointer-events: none;
    background-image: 
        linear-gradient(60deg, transparent 0%, rgba(0, 212, 255, 0.1) 50%, transparent 100%);
    background-size: 200% 200%;
    animation: sweep-gradient 10s ease infinite;
}
</style>
{% endblock %}

{% block content %}
<div class="dashboard-pattern"></div>

<div class="container-fluid px-4 main-content">
    <!-- Hero Section -->
    <div class="compensation-hero fade-in">
        <div class="hero-content">
            <h1 class="hero-title">보상 관리 센터</h1>
            <p class="hero-subtitle">AI 기반 스마트 보상 분석 시스템</p>
            <div class="mt-4">
                <select class="form-control-revolutionary" id="periodSelect" style="width: auto; display: inline-block;">
                    <option value="2024-11">2024년 11월</option>
                    <option value="2024-10">2024년 10월</option>
                    <option value="2024-09">2024년 9월</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Stats Grid -->
    <div class="revolutionary-grid grid-stats mb-xl">
        <!-- Total Compensation -->
        <div class="stat-card animate-slide-up animate-delay-1">
            <div class="stat-card-enhanced">
                <div class="stat-icon-wrapper">
                    <i class="fas fa-won-sign"></i>
                </div>
                <div>
                    <p class="stat-label">총 인건비</p>
                    <h3 class="stat-value">₩4.28B</h3>
                    <div class="stat-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        <span>5.2% 전월 대비</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Average Compensation -->
        <div class="stat-card animate-slide-up animate-delay-2">
            <div class="stat-card-enhanced">
                <div class="stat-icon-wrapper" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div>
                    <p class="stat-label">평균 보상</p>
                    <h3 class="stat-value">₩6.59M</h3>
                    <div class="stat-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        <span>3.8% 전월 대비</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Incentive -->
        <div class="stat-card animate-slide-up animate-delay-3">
            <div class="stat-card-enhanced">
                <div class="stat-icon-wrapper" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                    <i class="fas fa-trophy"></i>
                </div>
                <div>
                    <p class="stat-label">성과급 총액</p>
                    <h3 class="stat-value">₩529M</h3>
                    <div class="stat-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        <span>2.1% 전월 대비</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Employees -->
        <div class="stat-card animate-slide-up animate-delay-4">
            <div class="stat-card-enhanced">
                <div class="stat-icon-wrapper" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                    <i class="fas fa-users"></i>
                </div>
                <div>
                    <p class="stat-label">총 직원수</p>
                    <h3 class="stat-value">650명</h3>
                    <div class="stat-trend trend-up">
                        <i class="fas fa-user-plus"></i>
                        <span>+12명 신규</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="revolutionary-grid grid-2-col mb-xl">
        <!-- Compensation Mix Chart -->
        <div class="chart-card animate-slide-up animate-delay-1">
            <div class="chart-header">
                <h3 class="chart-title">
                    <i class="fas fa-chart-pie" style="color: var(--primary-color);"></i>
                    보상 구성 분석
                </h3>
                <div class="chart-actions">
                    <button class="chart-action-btn" onclick="updateChart('mix', 'pie')">
                        <i class="fas fa-chart-pie"></i>
                    </button>
                    <button class="chart-action-btn" onclick="updateChart('mix', 'bar')">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button class="chart-action-btn" onclick="exportChart('mix')">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            </div>
            <canvas id="compensationMixChart" height="300"></canvas>
        </div>

        <!-- Grade Distribution Chart -->
        <div class="chart-card animate-slide-up animate-delay-2">
            <div class="chart-header">
                <h3 class="chart-title">
                    <i class="fas fa-chart-bar" style="color: var(--primary-color);"></i>
                    등급별 보상 분포
                </h3>
                <div class="chart-actions">
                    <button class="chart-action-btn" onclick="updateChart('grade', 'bar')">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button class="chart-action-btn" onclick="updateChart('grade', 'line')">
                        <i class="fas fa-chart-line"></i>
                    </button>
                    <button class="chart-action-btn" onclick="exportChart('grade')">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            </div>
            <canvas id="gradeDistributionChart" height="300"></canvas>
        </div>
    </div>

    <!-- Data Tables Section -->
    <div class="revolutionary-grid grid-2-col mb-xl">
        <!-- Department Stats -->
        <div class="data-table-card animate-slide-up animate-delay-1">
            <div class="table-header">
                <h3 class="table-title">부서별 보상 현황</h3>
            </div>
            <div class="table-responsive">
                <table class="table-revolutionary">
                    <thead>
                        <tr>
                            <th>부서</th>
                            <th>인원</th>
                            <th>평균 보상</th>
                            <th>전월 대비</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="badge" style="background: var(--primary-gradient); padding: 4px 8px; border-radius: 5px;">개발</span>
                                    개발팀
                                </div>
                            </td>
                            <td>45</td>
                            <td class="gradient-text" style="font-weight: 600;">₩6.8M</td>
                            <td><span class="trend-up">+3.2%</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 4px 8px; border-radius: 5px;">영업</span>
                                    영업팀
                                </div>
                            </td>
                            <td>120</td>
                            <td class="gradient-text" style="font-weight: 600;">₩5.4M</td>
                            <td><span class="trend-up">+5.1%</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="badge" style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 4px 8px; border-radius: 5px;">인사</span>
                                    인사팀
                                </div>
                            </td>
                            <td>25</td>
                            <td class="gradient-text" style="font-weight: 600;">₩5.2M</td>
                            <td><span class="trend-down">-1.2%</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="badge" style="background: linear-gradient(135deg, #4facfe, #00f2fe); padding: 4px 8px; border-radius: 5px;">재무</span>
                                    재무팀
                                </div>
                            </td>
                            <td>30</td>
                            <td class="gradient-text" style="font-weight: 600;">₩5.6M</td>
                            <td><span class="trend-up">+2.8%</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Top Performers -->
        <div class="data-table-card animate-slide-up animate-delay-2">
            <div class="table-header">
                <h3 class="table-title">상위 성과자</h3>
            </div>
            <div class="table-responsive">
                <table class="table-revolutionary">
                    <thead>
                        <tr>
                            <th>순위</th>
                            <th>이름</th>
                            <th>부서</th>
                            <th>성과급</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="badge" style="background: linear-gradient(135deg, #FFD700, #FFA500); padding: 6px 12px; border-radius: 20px;">
                                    <i class="fas fa-trophy"></i> 1
                                </div>
                            </td>
                            <td style="font-weight: 600;">김철수</td>
                            <td>영업팀</td>
                            <td class="gradient-text" style="font-weight: 700;">₩1.2M</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="badge" style="background: linear-gradient(135deg, #C0C0C0, #B8B8B8); padding: 6px 12px; border-radius: 20px;">
                                    <i class="fas fa-medal"></i> 2
                                </div>
                            </td>
                            <td style="font-weight: 600;">이영희</td>
                            <td>개발팀</td>
                            <td class="gradient-text" style="font-weight: 700;">₩1.1M</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="badge" style="background: linear-gradient(135deg, #CD7F32, #B87333); padding: 6px 12px; border-radius: 20px;">
                                    <i class="fas fa-award"></i> 3
                                </div>
                            </td>
                            <td style="font-weight: 600;">박민수</td>
                            <td>기획팀</td>
                            <td class="gradient-text" style="font-weight: 700;">₩1.05M</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="badge" style="background: rgba(255, 255, 255, 0.1); padding: 6px 12px; border-radius: 20px;">4</div>
                            </td>
                            <td style="font-weight: 600;">최지원</td>
                            <td>영업팀</td>
                            <td class="gradient-text" style="font-weight: 700;">₩980K</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <h2 class="section-title">빠른 실행</h2>
    <div class="quick-actions">
        <a href="{% url 'compensation:calculator' %}" class="action-card">
            <div class="action-icon">
                <i class="fas fa-calculator"></i>
            </div>
            <div class="action-title">보상 계산기</div>
        </a>
        
        <a href="{% url 'compensation:reports' %}" class="action-card">
            <div class="action-icon">
                <i class="fas fa-file-chart-line"></i>
            </div>
            <div class="action-title">리포트 생성</div>
        </a>
        
        <a href="{% url 'compensation:settings' %}" class="action-card">
            <div class="action-icon">
                <i class="fas fa-cogs"></i>
            </div>
            <div class="action-title">설정 관리</div>
        </a>
        
        <div class="action-card" onclick="runMonthlyCalculation()">
            <div class="action-icon">
                <i class="fas fa-sync-alt"></i>
            </div>
            <div class="action-title">월별 계산</div>
        </div>
        
        <div class="action-card" onclick="showAIInsights()">
            <div class="action-icon">
                <i class="fas fa-brain"></i>
            </div>
            <div class="action-title">AI 인사이트</div>
        </div>
        
        <div class="action-card" onclick="exportDashboard()">
            <div class="action-icon">
                <i class="fas fa-download"></i>
            </div>
            <div class="action-title">데이터 내보내기</div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Chart Configuration with Revolutionary Theme
Chart.defaults.color = '#ffffff';
Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';
Chart.defaults.font.family = "'Inter', 'Noto Sans KR', sans-serif";

// Initialize Charts
document.addEventListener('DOMContentLoaded', function() {
    initCompensationMixChart();
    initGradeDistributionChart();
    loadDashboardData();
});

function initCompensationMixChart() {
    const ctx = document.getElementById('compensationMixChart').getContext('2d');
    
    // Create gradient
    const gradient1 = ctx.createLinearGradient(0, 0, 0, 300);
    gradient1.addColorStop(0, '#00d4ff');
    gradient1.addColorStop(1, '#0099ff');
    
    const gradient2 = ctx.createLinearGradient(0, 0, 0, 300);
    gradient2.addColorStop(0, '#667eea');
    gradient2.addColorStop(1, '#764ba2');
    
    const gradient3 = ctx.createLinearGradient(0, 0, 0, 300);
    gradient3.addColorStop(0, '#f093fb');
    gradient3.addColorStop(1, '#f5576c');
    
    const gradient4 = ctx.createLinearGradient(0, 0, 0, 300);
    gradient4.addColorStop(0, '#4facfe');
    gradient4.addColorStop(1, '#00f2fe');
    
    const gradient5 = ctx.createLinearGradient(0, 0, 0, 300);
    gradient5.addColorStop(0, '#43e97b');
    gradient5.addColorStop(1, '#38f9d7');
    
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['기본급', '고정OT', '직책급', '역량급', 'PI/월성과급'],
            datasets: [{
                data: [60, 12, 8, 5, 15],
                backgroundColor: [gradient1, gradient2, gradient3, gradient4, gradient5],
                borderWidth: 0,
                hoverOffset: 20
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 20,
                        font: {
                            size: 13
                        },
                        usePointStyle: true
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    cornerRadius: 8,
                    titleFont: {
                        size: 14
                    },
                    bodyFont: {
                        size: 13
                    },
                    callbacks: {
                        label: function(context) {
                            return context.label + ': ' + context.parsed + '%';
                        }
                    }
                }
            }
        }
    });
}

function initGradeDistributionChart() {
    const ctx = document.getElementById('gradeDistributionChart').getContext('2d');
    
    const gradient = ctx.createLinearGradient(0, 0, 0, 300);
    gradient.addColorStop(0, '#00d4ff');
    gradient.addColorStop(1, '#0099ff');
    
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['S', 'A+', 'A', 'B+', 'B', 'C', 'D'],
            datasets: [{
                label: '평균 보상 (백만원)',
                data: [7.5, 6.8, 6.2, 5.5, 5.0, 4.5, 4.0],
                backgroundColor: gradient,
                borderRadius: 10,
                barThickness: 40
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(255, 255, 255, 0.05)'
                    },
                    ticks: {
                        font: {
                            size: 12
                        },
                        callback: function(value) {
                            return '₩' + value + 'M';
                        }
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        font: {
                            size: 12
                        }
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    cornerRadius: 8,
                    callbacks: {
                        label: function(context) {
                            return '평균: ₩' + context.parsed.y + 'M';
                        }
                    }
                }
            }
        }
    });
}

function loadDashboardData() {
    const period = document.getElementById('periodSelect').value;
    
    // Add loading animation
    document.querySelectorAll('.stat-value').forEach(el => {
        el.classList.add('skeleton-loader');
    });
    
    // Fetch data
    fetch(`/compensation/api/dashboard-new/?period=${period}`)
        .then(response => response.json())
        .then(data => {
            // Remove loading animation
            document.querySelectorAll('.stat-value').forEach(el => {
                el.classList.remove('skeleton-loader');
            });
            
            // Update UI with data
            updateDashboard(data);
        })
        .catch(error => {
            console.error('Error loading dashboard data:', error);
            // Remove loading animation
            document.querySelectorAll('.stat-value').forEach(el => {
                el.classList.remove('skeleton-loader');
            });
        });
}

function updateDashboard(data) {
    // Update stat cards with animation
    // Implementation here
}

function runMonthlyCalculation() {
    const period = document.getElementById('periodSelect').value;
    
    // Show confirmation with styled modal
    if (confirm(`${period} 기간의 보상을 계산하시겠습니까?`)) {
        // Add loading state
        const btn = event.target.closest('.action-card');
        btn.style.opacity = '0.5';
        btn.style.pointerEvents = 'none';
        
        fetch('/compensation/api/snapshot/run/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: JSON.stringify({ period: period })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'completed') {
                alert('월별 계산이 완료되었습니다.');
                loadDashboardData();
            }
        })
        .finally(() => {
            btn.style.opacity = '1';
            btn.style.pointerEvents = 'auto';
        });
    }
}

function showAIInsights() {
    alert('AI 인사이트 기능 준비 중...');
}

function exportDashboard() {
    alert('대시보드 내보내기 기능 준비 중...');
}

function updateChart(chartType, style) {
    // Chart style update logic
    console.log(`Updating ${chartType} chart to ${style} style`);
}

function exportChart(chartType) {
    // Chart export logic
    console.log(`Exporting ${chartType} chart`);
}

// Add smooth scroll behavior
document.addEventListener('DOMContentLoaded', function() {
    // Add intersection observer for fade-in animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);

    // Observe all elements with animate classes
    document.querySelectorAll('[class*="animate-"]').forEach(el => {
        observer.observe(el);
    });
});

// Enhanced notification system
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type} animate-slide-up`;
    notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
            <span>${message}</span>
        </div>
    `;
    
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'linear-gradient(135deg, #00ff88, #00cc66)' : 'linear-gradient(135deg, #ff4757, #ff6b7a)'};
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        z-index: 9999;
        min-width: 300px;
        font-weight: 500;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(() => notification.remove(), 300);
    }, 5000);
}
</script>
{% endblock %}