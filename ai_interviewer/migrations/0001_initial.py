# Generated by Django 5.2.4 on 2025-08-07 07:35

import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('employees', '0013_remove_employee_dummy_ssn'),
        ('job_profiles', '0002_auto_20250806_1445'),
    ]

    operations = [
        migrations.CreateModel(
            name='InterviewQuestion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('question_number', models.IntegerField(verbose_name='질문 순서')),
                ('question_type', models.CharField(choices=[('OPEN_ENDED', '개방형'), ('BEHAVIORAL', '행동면접'), ('SITUATIONAL', '상황면접'), ('TECHNICAL', '기술면접'), ('COMPETENCY', '역량평가'), ('CULTURAL_FIT', '문화적합성'), ('FOLLOW_UP', '후속질문')], max_length=20, verbose_name='질문 유형')),
                ('question_text', models.TextField(verbose_name='질문 내용')),
                ('question_context', models.TextField(blank=True, verbose_name='질문 맥락')),
                ('expected_answer_points', models.JSONField(default=list, verbose_name='예상 답변 포인트')),
                ('generated_by_ai', models.BooleanField(default=True, verbose_name='AI 생성 여부')),
                ('ai_reasoning', models.TextField(blank=True, verbose_name='AI 생성 근거')),
                ('adapted_from_previous', models.BooleanField(default=False, verbose_name='이전 응답 기반 적응')),
                ('evaluation_criteria', models.CharField(choices=[('COMMUNICATION', '의사소통'), ('PROBLEM_SOLVING', '문제해결'), ('LEADERSHIP', '리더십'), ('TEAMWORK', '팀워크'), ('CREATIVITY', '창의성'), ('TECHNICAL_SKILLS', '기술역량'), ('CULTURAL_FIT', '문화적합성'), ('ADAPTABILITY', '적응력'), ('WORK_ETHIC', '직업윤리')], max_length=20, verbose_name='평가 기준')),
                ('max_score', models.IntegerField(default=10, verbose_name='최대 점수')),
                ('weight', models.FloatField(default=1.0, verbose_name='가중치')),
                ('asked_at', models.DateTimeField(auto_now_add=True, verbose_name='질문 시간')),
                ('response_deadline', models.DateTimeField(blank=True, null=True, verbose_name='응답 마감시간')),
                ('difficulty_score', models.FloatField(default=5.0, verbose_name='난이도 점수')),
                ('estimated_response_time', models.IntegerField(default=120, verbose_name='예상 응답시간(초)')),
                ('tags', models.JSONField(default=list, verbose_name='태그')),
            ],
            options={
                'verbose_name': '면접 질문',
                'verbose_name_plural': '면접 질문',
                'ordering': ['session', 'question_number'],
            },
        ),
        migrations.CreateModel(
            name='InterviewTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='템플릿 이름')),
                ('category', models.CharField(choices=[('GENERAL', '일반'), ('TECHNICAL', '기술직'), ('MANAGEMENT', '관리직'), ('SALES', '영업직'), ('CREATIVE', '창작직'), ('CUSTOMER_SERVICE', '고객서비스'), ('ENTRY_LEVEL', '신입직')], max_length=20, verbose_name='카테고리')),
                ('description', models.TextField(verbose_name='설명')),
                ('target_duration', models.IntegerField(default=30, verbose_name='목표 시간(분)')),
                ('question_count', models.IntegerField(default=10, verbose_name='질문 수')),
                ('difficulty_level', models.CharField(choices=[('BEGINNER', '초급'), ('INTERMEDIATE', '중급'), ('ADVANCED', '고급'), ('EXPERT', '전문가')], max_length=20, verbose_name='난이도')),
                ('question_templates', models.JSONField(default=list, verbose_name='질문 템플릿')),
                ('evaluation_criteria', models.JSONField(default=list, verbose_name='평가 기준')),
                ('usage_count', models.IntegerField(default=0, verbose_name='사용 횟수')),
                ('average_rating', models.FloatField(default=0.0, verbose_name='평균 평점')),
                ('created_by', models.CharField(default='SYSTEM', max_length=100, verbose_name='생성자')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='생성일시')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='수정일시')),
                ('is_active', models.BooleanField(default=True, verbose_name='활성화')),
            ],
            options={
                'verbose_name': '면접 템플릿',
                'verbose_name_plural': '면접 템플릿',
                'ordering': ['-usage_count', 'name'],
            },
        ),
        migrations.CreateModel(
            name='InterviewResponse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('response_type', models.CharField(choices=[('TEXT', '텍스트'), ('VOICE', '음성'), ('VIDEO', '영상'), ('FILE', '파일'), ('MIXED', '복합')], default='TEXT', max_length=10, verbose_name='응답 유형')),
                ('response_text', models.TextField(verbose_name='응답 내용')),
                ('response_file', models.FileField(blank=True, null=True, upload_to='interview_responses/', verbose_name='응답 파일')),
                ('started_at', models.DateTimeField(verbose_name='응답 시작시간')),
                ('submitted_at', models.DateTimeField(auto_now_add=True, verbose_name='제출시간')),
                ('response_time_seconds', models.FloatField(verbose_name='응답 소요시간(초)')),
                ('ai_score', models.FloatField(default=0.0, verbose_name='AI 점수')),
                ('ai_feedback', models.TextField(blank=True, verbose_name='AI 피드백')),
                ('ai_analysis', models.JSONField(default=dict, verbose_name='AI 분석')),
                ('quality_rating', models.CharField(blank=True, choices=[('EXCELLENT', '매우 우수'), ('GOOD', '우수'), ('AVERAGE', '보통'), ('BELOW_AVERAGE', '미흡'), ('POOR', '부족')], max_length=20, verbose_name='품질 평가')),
                ('keyword_matches', models.JSONField(default=list, verbose_name='키워드 매칭')),
                ('sentiment_score', models.FloatField(default=0.0, verbose_name='감정 점수')),
                ('confidence_level', models.FloatField(default=0.0, verbose_name='자신감 수준')),
                ('clarity_score', models.FloatField(default=0.0, verbose_name='명확성 점수')),
                ('relevance_score', models.FloatField(default=0.0, verbose_name='관련성 점수')),
                ('word_count', models.IntegerField(default=0, verbose_name='단어 수')),
                ('revision_count', models.IntegerField(default=0, verbose_name='수정 횟수')),
                ('flagged_for_review', models.BooleanField(default=False, verbose_name='검토 필요')),
                ('question', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='response', to='ai_interviewer.interviewquestion', verbose_name='질문')),
            ],
            options={
                'verbose_name': '면접 응답',
                'verbose_name_plural': '면접 응답',
                'ordering': ['question__question_number'],
            },
        ),
        migrations.CreateModel(
            name='InterviewSession',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_id', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=200, verbose_name='면접 제목')),
                ('candidate_name', models.CharField(max_length=100, verbose_name='응답자 이름')),
                ('candidate_email', models.EmailField(max_length=254, verbose_name='응답자 이메일')),
                ('candidate_phone', models.CharField(blank=True, max_length=20, verbose_name='응답자 전화번호')),
                ('session_type', models.CharField(choices=[('SCREENING', '서류심사'), ('TECHNICAL', '기술면접'), ('BEHAVIORAL', '인성면접'), ('FINAL', '최종면접'), ('PRACTICAL', '실무면접'), ('CULTURAL_FIT', '문화적합성')], default='BEHAVIORAL', max_length=20, verbose_name='면접 유형')),
                ('difficulty_level', models.CharField(choices=[('BEGINNER', '초급'), ('INTERMEDIATE', '중급'), ('ADVANCED', '고급'), ('EXPERT', '전문가')], default='INTERMEDIATE', max_length=20, verbose_name='난이도')),
                ('expected_duration', models.IntegerField(default=30, verbose_name='예상 소요시간(분)')),
                ('max_questions', models.IntegerField(default=10, verbose_name='최대 질문 수')),
                ('status', models.CharField(choices=[('SCHEDULED', '예정됨'), ('IN_PROGRESS', '진행 중'), ('COMPLETED', '완료됨'), ('CANCELLED', '취소됨'), ('PAUSED', '일시중단'), ('FAILED', '실패')], default='SCHEDULED', max_length=20, verbose_name='상태')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='생성일시')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='시작일시')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='완료일시')),
                ('ai_personality', models.CharField(default='PROFESSIONAL', max_length=50, verbose_name='AI 성격')),
                ('ai_model_version', models.CharField(default='gpt-3.5-turbo', max_length=20, verbose_name='AI 모델')),
                ('custom_instructions', models.TextField(blank=True, verbose_name='커스텀 지시사항')),
                ('total_questions_asked', models.IntegerField(default=0, verbose_name='총 질문 수')),
                ('total_responses', models.IntegerField(default=0, verbose_name='총 응답 수')),
                ('average_response_time', models.FloatField(default=0.0, verbose_name='평균 응답 시간(초)')),
                ('overall_score', models.FloatField(default=0.0, verbose_name='종합 점수')),
                ('ai_assessment', models.JSONField(default=dict, verbose_name='AI 평가')),
                ('interview_language', models.CharField(default='ko', max_length=10, verbose_name='면접 언어')),
                ('recording_enabled', models.BooleanField(default=False, verbose_name='녹음 활성화')),
                ('session_notes', models.TextField(blank=True, verbose_name='세션 노트')),
                ('job_profile', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='job_profiles.jobprofile', verbose_name='채용 공고')),
                ('test_employee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='employees.employee', verbose_name='테스트 직원')),
            ],
            options={
                'verbose_name': '면접 세션',
                'verbose_name_plural': '면접 세션',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='interviewquestion',
            name='session',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='questions', to='ai_interviewer.interviewsession', verbose_name='면접 세션'),
        ),
        migrations.CreateModel(
            name='InterviewMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_duration_minutes', models.FloatField(default=0.0, verbose_name='총 소요시간(분)')),
                ('average_question_time', models.FloatField(default=0.0, verbose_name='평균 질문당 시간(분)')),
                ('thinking_time_ratio', models.FloatField(default=0.0, verbose_name='사고시간 비율')),
                ('response_completeness', models.FloatField(default=0.0, verbose_name='응답 완성도')),
                ('average_response_length', models.IntegerField(default=0, verbose_name='평균 응답 길이')),
                ('vocabulary_diversity', models.FloatField(default=0.0, verbose_name='어휘 다양성')),
                ('communication_score', models.FloatField(default=0.0, verbose_name='의사소통 점수')),
                ('problem_solving_score', models.FloatField(default=0.0, verbose_name='문제해결 점수')),
                ('technical_competence', models.FloatField(default=0.0, verbose_name='기술역량 점수')),
                ('cultural_fit_score', models.FloatField(default=0.0, verbose_name='문화적합성 점수')),
                ('confidence_consistency', models.FloatField(default=0.0, verbose_name='자신감 일관성')),
                ('stress_level_indicator', models.FloatField(default=0.0, verbose_name='스트레스 지표')),
                ('engagement_level', models.FloatField(default=0.0, verbose_name='참여도')),
                ('overall_recommendation', models.CharField(blank=True, choices=[('STRONGLY_RECOMMEND', '적극 추천'), ('RECOMMEND', '추천'), ('NEUTRAL', '보통'), ('NOT_RECOMMEND', '비추천'), ('STRONGLY_NOT_RECOMMEND', '적극 비추천')], max_length=30, verbose_name='종합 추천도')),
                ('risk_factors', models.JSONField(default=list, verbose_name='리스크 요소')),
                ('strength_points', models.JSONField(default=list, verbose_name='강점')),
                ('calculated_at', models.DateTimeField(auto_now=True, verbose_name='계산일시')),
                ('algorithm_version', models.CharField(default='1.0', max_length=20, verbose_name='알고리즘 버전')),
                ('session', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='metrics', to='ai_interviewer.interviewsession', verbose_name='면접 세션')),
            ],
            options={
                'verbose_name': '면접 지표',
                'verbose_name_plural': '면접 지표',
            },
        ),
        migrations.CreateModel(
            name='InterviewFeedback',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('feedback_type', models.CharField(choices=[('OVERALL', '종합평가'), ('QUESTION_SPECIFIC', '질문별'), ('IMPROVEMENT', '개선사항'), ('STRENGTH', '강점'), ('RECOMMENDATION', '추천사항')], max_length=20, verbose_name='피드백 유형')),
                ('title', models.CharField(max_length=200, verbose_name='제목')),
                ('content', models.TextField(verbose_name='피드백 내용')),
                ('rating', models.IntegerField(blank=True, choices=[(5, '매우 우수'), (4, '우수'), (3, '보통'), (2, '미흡'), (1, '부족')], null=True, verbose_name='평점')),
                ('generated_by_ai', models.BooleanField(default=True, verbose_name='AI 생성')),
                ('confidence_score', models.FloatField(default=0.0, verbose_name='신뢰도 점수')),
                ('improvement_suggestions', models.JSONField(default=list, verbose_name='개선 제안사항')),
                ('followup_resources', models.JSONField(default=list, verbose_name='후속 자료')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='생성일시')),
                ('priority_level', models.IntegerField(default=3, verbose_name='우선순위')),
                ('tags', models.JSONField(default=list, verbose_name='태그')),
                ('specific_question', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='ai_interviewer.interviewquestion', verbose_name='특정 질문')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedback', to='ai_interviewer.interviewsession', verbose_name='면접 세션')),
            ],
            options={
                'verbose_name': '면접 피드백',
                'verbose_name_plural': '면접 피드백',
                'ordering': ['-priority_level', '-created_at'],
            },
        ),
        migrations.AlterUniqueTogether(
            name='interviewquestion',
            unique_together={('session', 'question_number')},
        ),
    ]
