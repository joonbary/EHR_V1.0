{% extends "base.html" %}
{% load static %}

{% block title %}인력/보상 현황 대시보드 - OK금융그룹{% endblock %}

{% block extra_css %}
<style>
.workforce-dashboard {
    padding: 20px;
}

.metric-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.metric-card {
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    text-align: center;
}

.metric-icon {
    font-size: 2rem;
    color: #00b894;
    margin-bottom: 10px;
}

.metric-value {
    font-size: 2rem;
    font-weight: bold;
    color: #2d3436;
    margin: 10px 0;
}

.metric-label {
    color: #636e72;
    font-size: 0.9rem;
}

.chart-section {
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

.data-table {
    margin-top: 20px;
}

.table-header {
    background-color: #f8f9fa;
    font-weight: 600;
}
</style>
{% endblock %}

{% block content %}
<div class="workforce-dashboard">
    <div class="page-header">
        <h1>인력/보상 현황 대시보드</h1>
        <p class="text-muted">조직 인력 구성 및 보상 체계 분석</p>
    </div>

    <!-- 핵심 지표 카드 -->
    <div class="metric-cards">
        <div class="metric-card">
            <div class="metric-icon"><i class="fas fa-users"></i></div>
            <div class="metric-value">1,248</div>
            <div class="metric-label">전체 직원 수</div>
        </div>
        
        <div class="metric-card">
            <div class="metric-icon"><i class="fas fa-chart-line"></i></div>
            <div class="metric-value">4.2%</div>
            <div class="metric-label">연간 이직률</div>
        </div>
        
        <div class="metric-card">
            <div class="metric-icon"><i class="fas fa-won-sign"></i></div>
            <div class="metric-value">7,250만원</div>
            <div class="metric-label">평균 연봉</div>
        </div>
        
        <div class="metric-card">
            <div class="metric-icon"><i class="fas fa-percentage"></i></div>
            <div class="metric-value">92%</div>
            <div class="metric-label">직원 만족도</div>
        </div>
    </div>

    <!-- 차트 섹션 -->
    <div class="row">
        <div class="col-md-6">
            <div class="chart-section">
                <h3>직급별 인력 분포</h3>
                <canvas id="headcountByLevelChart" height="300"></canvas>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="chart-section">
                <h3>부서별 평균 보상</h3>
                <canvas id="compensationByDeptChart" height="300"></canvas>
            </div>
        </div>
    </div>

    <!-- 상세 테이블 -->
    <div class="chart-section">
        <h3>부서별 인력 현황</h3>
        <table class="table table-hover data-table">
            <thead class="table-header">
                <tr>
                    <th>부서</th>
                    <th>인원</th>
                    <th>평균 연봉</th>
                    <th>이직률</th>
                    <th>만족도</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>IT개발</td>
                    <td>215</td>
                    <td>8,500만원</td>
                    <td>3.2%</td>
                    <td>94%</td>
                </tr>
                <tr>
                    <td>영업</td>
                    <td>342</td>
                    <td>7,200만원</td>
                    <td>5.1%</td>
                    <td>89%</td>
                </tr>
                <tr>
                    <td>마케팅</td>
                    <td>128</td>
                    <td>6,800만원</td>
                    <td>4.5%</td>
                    <td>91%</td>
                </tr>
                <tr>
                    <td>인사</td>
                    <td>86</td>
                    <td>6,500만원</td>
                    <td>2.8%</td>
                    <td>95%</td>
                </tr>
                <tr>
                    <td>재무</td>
                    <td>157</td>
                    <td>7,800만원</td>
                    <td>3.5%</td>
                    <td>93%</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// 차트 초기화
document.addEventListener('DOMContentLoaded', function() {
    // 직급별 인력 분포
    const ctx1 = document.getElementById('headcountByLevelChart').getContext('2d');
    new Chart(ctx1, {
        type: 'doughnut',
        data: {
            labels: ['사원', '대리', '과장', '차장', '부장', '임원'],
            datasets: [{
                data: [320, 280, 250, 200, 150, 48],
                backgroundColor: [
                    '#74b9ff',
                    '#00b894',
                    '#fdcb6e',
                    '#e17055',
                    '#6c5ce7',
                    '#fd79a8'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });

    // 부서별 평균 보상
    const ctx2 = document.getElementById('compensationByDeptChart').getContext('2d');
    new Chart(ctx2, {
        type: 'horizontalBar',
        data: {
            labels: ['IT개발', '재무', '영업', '마케팅', '인사', '운영'],
            datasets: [{
                label: '평균 연봉 (만원)',
                data: [8500, 7800, 7200, 6800, 6500, 6200],
                backgroundColor: '#00b894'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
});
</script>
{% endblock %}